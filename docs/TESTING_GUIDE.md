# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ Bookstore Recommendation System.

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–∫-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é)
2. [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö](#–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-—Ç–µ—Å—Ç–æ–≤—ã—Ö-–¥–∞–Ω–Ω—ã—Ö)
3. [–ë–µ–Ω—á–º–∞—Ä–∫ —Å–∏—Å—Ç–µ–º—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π](#–±–µ–Ω—á–º–∞—Ä–∫-—Å–∏—Å—Ç–µ–º—ã-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π)
4. [–ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#–Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
5. [Unit —Ç–µ—Å—Ç—ã](#unit-—Ç–µ—Å—Ç—ã)
6. [–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤](#–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è-—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)

---

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd backend

# –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
pip install -r tests/requirements-test.txt
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MongoDB

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MongoDB –∑–∞–ø—É—â–µ–Ω
# Windows (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ —Å–µ—Ä–≤–∏—Å):
sc query MongoDB

# Linux/Mac:
systemctl status mongod

# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Python:
python -c "from app.db.mongodb import connect_to_mongo; import asyncio; asyncio.run(connect_to_mongo()); print('‚úì MongoDB connected')"
```

### 3. –ó–∞–ø—É—Å–∫ backend —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
uvicorn app.main:app --reload
```

–°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:8000

---

## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–°–æ–∑–¥–∞–µ—Ç –±–æ–ª—å—à–æ–π –æ–±—ä–µ–º —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:** 1,000
- **–ö–Ω–∏–≥–∏:** 5,000
- **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:** ~50,000 (50 –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

### –ó–∞–ø—É—Å–∫

```bash
cd backend
python -m tests.generate_test_data
```

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
============================================================
üöÄ –ì–ï–ù–ï–†–ê–¶–ò–Ø –¢–ï–°–¢–û–í–´–• –î–ê–ù–ù–´–• –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò
============================================================

üìä –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 1000
  - –ö–Ω–∏–≥: 5000
  - –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: 50
  - –í—Å–µ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π: ~50000

üìù –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...
  ‚úì –°–æ–∑–¥–∞–Ω–æ 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...
  ‚úì –°–æ–∑–¥–∞–Ω–æ 200 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...
  ...
‚úÖ 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ–∑–¥–∞–Ω—ã

üìö –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 5000 –∫–Ω–∏–≥...
  ...
‚úÖ 5000 –∫–Ω–∏–≥ —Å–æ–∑–¥–∞–Ω–æ

üîÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ~50000 –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π...
  ...
‚úÖ 50000 –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π —Å–æ–∑–¥–∞–Ω–æ

============================================================
‚úÖ –ì–ï–ù–ï–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê –ó–ê 180.45 –°–ï–ö–£–ù–î
============================================================
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `tests/generate_test_data.py`:

```python
# –í —Ñ—É–Ω–∫—Ü–∏–∏ main() –∏–∑–º–µ–Ω–∏—Ç–µ:
NUM_USERS = 2000              # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
NUM_BOOKS = 10000             # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–∏–≥
INTERACTIONS_PER_USER = 100   # –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å email `testuser*@example.com`) –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –Ω–æ–≤—ã—Ö.

–î–ª—è —Ä—É—á–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö:

```python
# –í MongoDB shell
use bookstore_db
db.users.deleteMany({})
db.books.deleteMany({})
db.interactions.deleteMany({})
db.orders.deleteMany({})
db.cart.deleteMany({})
```

---

## –ë–µ–Ω—á–º–∞—Ä–∫ —Å–∏—Å—Ç–µ–º—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ò–∑–º–µ—Ä—è–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π.

### –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è

1. **Collaborative Filtering** - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
2. **Content-Based Filtering** - –ø–æ—Ö–æ–∂–∏–µ –∫–Ω–∏–≥–∏
3. **Popularity-Based** - —Ç—Ä–µ–Ω–¥–æ–≤—ã–µ –∫–Ω–∏–≥–∏
4. **Cold Start** - —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ó–∞–ø—É—Å–∫

```bash
cd backend
python -m tests.benchmark_recommendations
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

- Collaborative Filtering: 50 –∏—Ç–µ—Ä–∞—Ü–∏–π
- Content-Based: 50 –∏—Ç–µ—Ä–∞—Ü–∏–π
- Popularity-Based: 30 –∏—Ç–µ—Ä–∞—Ü–∏–π
- Cold Start: 30 –∏—Ç–µ—Ä–∞—Ü–∏–π

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
============================================================
üöÄ –ë–ï–ù–ß–ú–ê–†–ö –°–ò–°–¢–ï–ú–´ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ô
============================================================

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:      1000
  –ö–Ω–∏–≥:               5000
  –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π:     50000

üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Collaborative Filtering (50 –∏—Ç–µ—Ä–∞—Ü–∏–π)...
  ‚úì –ó–∞–≤–µ—Ä—à–µ–Ω–æ 10/50 –∏—Ç–µ—Ä–∞—Ü–∏–π
  ‚úì –ó–∞–≤–µ—Ä—à–µ–Ω–æ 20/50 –∏—Ç–µ—Ä–∞—Ü–∏–π
  ...

============================================================
üìà –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ë–ï–ù–ß–ú–ê–†–ö–ê
============================================================

üìä Collaborative Filtering (–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
------------------------------------------------------------
  –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤:        50
  –£—Å–ø–µ—à–Ω—ã—Ö:              50
  –û—à–∏–±–æ–∫:                0
  –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è:     45.23 –º—Å
  –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è:    850.45 –º—Å
  –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è:         180.34 –º—Å
  –ú–µ–¥–∏–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è:       165.12 –º—Å
  –°—Ç–¥. –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ:       120.45 –º—Å
  –ó–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É:    5.54

...
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

–§–∞–π–ª: `backend/tests/benchmark_results.txt`

### –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–•–æ—Ä–æ—à–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:**
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è < 200 –º—Å –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
- –°—Ç–¥. –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ < 100 –º—Å (—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)
- RPS > 5 –¥–ª—è CF, > 20 –¥–ª—è Content-Based

**–¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:**
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è > 500 –º—Å
- –í—ã—Å–æ–∫–æ–µ —Å—Ç–¥. –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ (> 200 –º—Å)
- –û—à–∏–±–∫–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏

---

## –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: Locust

Locust - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å Web UI.

### –†–µ–∂–∏–º 1: –° Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

```bash
cd backend
locust -f tests/locustfile.py --host=http://localhost:8000
```

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: http://localhost:8089

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ Web UI:**
- Number of users: 50 (–Ω–∞—á–Ω–∏—Ç–µ —Å –Ω–µ–±–æ–ª—å—à–æ–≥–æ —á–∏—Å–ª–∞)
- Spawn rate: 5 (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–µ–∫—É–Ω–¥—É)
- Host: —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —á–µ—Ä–µ–∑ --host

–ù–∞–∂–º–∏—Ç–µ **Start swarming**

### –†–µ–∂–∏–º 2: Headless (–±–µ–∑ UI)

```bash
# 50 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, 60 —Å–µ–∫—É–Ω–¥
locust -f tests/locustfile.py \
  --host=http://localhost:8000 \
  --users 50 \
  --spawn-rate 5 \
  --run-time 60s \
  --headless

# 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, 5 –º–∏–Ω—É—Ç
locust -f tests/locustfile.py \
  --host=http://localhost:8000 \
  --users 100 \
  --spawn-rate 10 \
  --run-time 300s \
  --headless

# –° —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ HTML –æ—Ç—á–µ—Ç
locust -f tests/locustfile.py \
  --host=http://localhost:8000 \
  --users 100 \
  --spawn-rate 10 \
  --run-time 300s \
  --headless \
  --html=locust_report.html
```

### –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–§–∞–π–ª `locustfile.py` —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–≤–∞ –∫–ª–∞—Å—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

1. **BookstoreUser** (–æ—Å–Ω–æ–≤–Ω–æ–π)
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–∞–ª–æ–≥–∞ (weight: 10)
   - –ü–æ–∏—Å–∫ –∫–Ω–∏–≥ (weight: 8)
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π (weight: 7)
   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (weight: 5)
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É (weight: 2)

2. **RecommendationFocusedUser** (—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
   - –§–æ–∫—É—Å –Ω–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
   - –ú–µ–Ω—å—à–∏–π weight (1:3 –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É)

### –ú–µ—Ç—Ä–∏–∫–∏ Locust

**Request Statistics:**
- Type: GET/POST/etc.
- Name: Endpoint name
- Requests: Total requests
- Fails: Failed requests
- Median: Median response time
- 95%ile: 95th percentile
- Average: Average response time
- Min/Max: Min/Max response time
- RPS: Requests per second
- Failures/s: Failures per second

**–ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å:**
- ‚úÖ Fails –±–ª–∏–∑–∫–æ –∫ 0%
- ‚úÖ Median < 200 –º—Å
- ‚úÖ 95%ile < 500 –º—Å
- ‚ö†Ô∏è –ï—Å–ª–∏ Fails > 1% - –ø—Ä–æ–±–ª–µ–º—ã
- ‚ö†Ô∏è –ï—Å–ª–∏ 95%ile > 1000 –º—Å - –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
Type     Name                              # reqs  # fails  Avg    Min    Max    Med    90%    95%    99%    RPS
---------|----------------------------------|-------|--------|------|------|------|------|------|------|------|------
GET      /api/v1/books/                    2450    0        45     12     250    42     85     120    180    8.2
GET      /api/v1/books/search              1850    0        55     15     320    52     105    145    220    6.2
GET      /api/v1/recommendations/for-you   1200    2        185    45     980    165    380    520    780    4.0
POST     /api/v1/cart/add                  550     0        48     18     210    45     92     125    175    1.8

Aggregated                                  10650   2        68     12     980    58     195    290    520    35.5
```

---

## Unit —Ç–µ—Å—Ç—ã

### –ó–∞–ø—É—Å–∫ pytest

```bash
cd backend

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
pytest

# –° –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
pytest -v

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
pytest --cov=app --cov-report=html

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
pytest tests/test_auth.py

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
pytest tests/test_auth.py::test_register_user
```

### –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª—ã –≤ `backend/tests/`:

```python
# tests/test_recommendations.py
import pytest
from app.services.recommendation_engine import RecommendationEngine

@pytest.mark.asyncio
async def test_collaborative_filtering():
    engine = RecommendationEngine()
    recommendations = await engine.get_personal_recommendations(
        user_id="test_user",
        limit=10
    )
    assert len(recommendations) <= 10
    assert all(hasattr(book, 'title') for book in recommendations)
```

---

## –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ë–µ–Ω—á–º–∞—Ä–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

**Collaborative Filtering:**
- –°—Ä–µ–¥–Ω–µ–µ: 150-250 –º—Å - ‚úÖ –û—Ç–ª–∏—á–Ω–æ
- –°—Ä–µ–¥–Ω–µ–µ: 250-500 –º—Å - üü° –ü—Ä–∏–µ–º–ª–µ–º–æ
- –°—Ä–µ–¥–Ω–µ–µ: > 500 –º—Å - üî¥ –¢—Ä–µ–±—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**Content-Based:**
- –°—Ä–µ–¥–Ω–µ–µ: < 50 –º—Å - ‚úÖ –û—Ç–ª–∏—á–Ω–æ
- –°—Ä–µ–¥–Ω–µ–µ: 50-150 –º—Å - üü° –ü—Ä–∏–µ–º–ª–µ–º–æ
- –°—Ä–µ–¥–Ω–µ–µ: > 150 –º—Å - üî¥ –¢—Ä–µ–±—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫:**
- < 0.1% - ‚úÖ –û—Ç–ª–∏—á–Ω–æ
- 0.1-1% - üü° –ü—Ä–∏–µ–º–ª–µ–º–æ
- > 1% - üî¥ –ü—Ä–æ–±–ª–µ–º—ã

**Response time (95%ile):**
- < 200 –º—Å - ‚úÖ –û—Ç–ª–∏—á–Ω–æ
- 200-500 –º—Å - üü° –ü—Ä–∏–µ–º–ª–µ–º–æ
- > 500 –º—Å - üî¥ –ú–µ–¥–ª–µ–Ω–Ω–æ

**RPS (Requests per second):**
- –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∞–ø–ø–∞—Ä–∞—Ç—É—Ä—ã
- –°—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ —Å baseline
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–µ–π –ø—Ä–∏ —Ä–æ—Å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## –°–æ–≤–µ—Ç—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø–ª–æ—Ö–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω–¥–µ–∫—Å—ã MongoDB**
   ```bash
   # –í MongoDB shell
   use bookstore_db
   db.interactions.getIndexes()
   db.books.getIndexes()
   ```

2. **–ü—Ä–æ—Ñ–∏–ª–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã**
   ```bash
   # –í–∫–ª—é—á–∏—Ç–µ profiler
   db.setProfilingLevel(2)
   
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
   db.system.profile.find().sort({millis:-1}).limit(10)
   ```

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤**
   ```bash
   # CPU –∏ –ø–∞–º—è—Ç—å
   # Windows: Task Manager
   # Linux: htop
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**
   ```bash
   # Backend –ª–æ–≥–∏ –±—É–¥—É—Ç –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω uvicorn
   ```

---

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

–°–æ–∑–¥–∞–π—Ç–µ `run_all_tests.sh` (Linux/Mac) –∏–ª–∏ `run_all_tests.bat` (Windows):

```bash
#!/bin/bash

echo "=== –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ ==="

echo "\n1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö..."
python -m tests.generate_test_data

echo "\n2. –ë–µ–Ω—á–º–∞—Ä–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π..."
python -m tests.benchmark_recommendations

echo "\n3. –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2 –º–∏–Ω—É—Ç—ã)..."
locust -f tests/locustfile.py \
  --host=http://localhost:8000 \
  --users 50 \
  --spawn-rate 5 \
  --run-time 120s \
  --headless \
  --html=locust_report.html

echo "\n4. Unit —Ç–µ—Å—Ç—ã..."
pytest -v

echo "\n=== –í—Å–µ —Ç–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã ==="
echo "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:"
echo "  - –ë–µ–Ω—á–º–∞—Ä–∫: backend/tests/benchmark_results.txt"
echo "  - Locust: locust_report.html"
echo "  - Pytest: terminal output"
```

---

## Continuous Integration (CI)

### GitHub Actions –ø—Ä–∏–º–µ—Ä

`.github/workflows/tests.yml`:

```yaml
name: Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    
    services:
      mongodb:
        image: mongo:4.4
        ports:
          - 27017:27017
    
    steps:
    - uses: actions/checkout@v2
    
    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: '3.10'
    
    - name: Install dependencies
      run: |
        cd backend
        pip install -r requirements.txt
        pip install -r tests/requirements-test.txt
    
    - name: Run unit tests
      run: |
        cd backend
        pytest -v
    
    - name: Run benchmarks
      run: |
        cd backend
        python -m tests.generate_test_data
        python -m tests.benchmark_recommendations
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–µ–≥—É–ª—è—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - –∫–ª—é—á –∫ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—é –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–∏—Å—Ç–µ–º—ã. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

- ‚úÖ –ó–∞–ø—É—Å–∫–∞—Ç—å unit —Ç–µ—Å—Ç—ã –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞
- ‚úÖ –ü—Ä–æ–≤–æ–¥–∏—Ç—å –±–µ–Ω—á–º–∞—Ä–∫–∏ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
- ‚úÖ –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–∞–º–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–æ–≤

---

**–í–æ–ø—Ä–æ—Å—ã?** –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

